"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[597],{9780:(e,s,l)=>{l.d(s,{A:()=>a});l(9950);const a=l.p+"static/media/DeleteIcon.5d30c3105e59d4b9bfb1217c2ee2233a.svg"},2637:(e,s,l)=>{l.d(s,{A:()=>a});l(9950);const a=l.p+"static/media/Editicon.a55d5498ee44d9403ea47f9de49231ed.svg"},5597:(e,s,l)=>{l.r(s),l.d(s,{default:()=>o});var a=l(9950),t=(l(2637),l(9780),l(1395)),d=l(5887),i=l(1908),c=l(4414);const o=e=>{const[s,l]=(0,a.useState)([]),[o,r]=(0,a.useState)([]),[n,p]=(0,a.useState)({package:void 0,fromDate:"",toDate:"",status:void 0,schedule:void 0}),[u,m]=(0,a.useState)([]),[x,h]=(0,a.useState)({summary:{},selected_package:null});(0,a.useEffect)((()=>{(0,i.Si)({}).then((e=>{(0,d.Ay)(e.data.message,{style:{background:"#02B41F",borderRadius:"5px",fontSize:"14px",padding:"2px",color:"white"},duration:5e3}),l(e.data.result.data),(0,i.Og)({package_id:e.data.result.data.map((e=>e.product_service_id))}).then((e=>{r(e.data.result.data)})).catch((e=>{}))})).catch((e=>{(0,d.Ay)(e.response.data.message,{style:{background:"#FFE900",borderRadius:"5px",fontSize:"10px",padding:"2px"},duration:5e3})})),(0,i.oy)().then((e=>{(0,d.Ay)(e.data.message,{style:{background:"#02B41F",borderRadius:"5px",fontSize:"14px",padding:"2px",color:"white"},duration:5e3});let s={};e.data.result.data.forEach((e=>{s[e.product_service_id]={pending:e.pending_count,confirmed:e.confirmed_count,cancelled:e.cancelled_count,total:parseInt(e.pending_count)+parseInt(e.confirmed_count)+parseInt(e.cancelled_count)}})),console.log(s),h({selected_package:Object.keys(s)[0],summary:s})})).catch((e=>{(0,d.Ay)(e.response.data.message,{style:{background:"#FFE900",borderRadius:"5px",fontSize:"10px",padding:"2px"},duration:5e3})}))}),[]);const f=(e,s)=>{if("package"===s)console.log(e),p({...n,[s]:e,schedule:{}});else p({...n,[s]:e})};return(0,c.jsxs)("div",{className:"w-full relative flex h-full",children:[(0,c.jsx)(d.l$,{}),(0,c.jsxs)("div",{className:"w-[70%] h-full p-2 mr-1",children:[(0,c.jsxs)("div",{className:"flex justify-between items-end",children:[(0,c.jsxs)("div",{className:"w-1/5",children:[(0,c.jsx)("p",{className:"text-sm",children:"Package Name"}),(0,c.jsx)(t.Ay,{placeholder:"package ...",value:n.package,onChange:e=>{f(e,"package")},options:s.map((e=>({value:e.product_service_id,label:e.title})))})]}),(0,c.jsxs)("div",{className:"w-1/5",children:[(0,c.jsx)("p",{className:"text-sm",children:"Schedule"}),(0,c.jsx)(t.Ay,{value:n.schedule,onChange:e=>{f(e,"schedule")},options:o.filter((e=>{var s;return e.product_service_id==(null===(s=n.package)||void 0===s?void 0:s.value)})).map((e=>({value:e.schedule_id,label:String(e.start_time).split("T")[0]})))})]}),(0,c.jsxs)("div",{className:"w-1/5",children:[(0,c.jsx)("p",{className:"text-sm",children:"Status"}),(0,c.jsx)(t.Ay,{value:n.status,onChange:e=>{f(e,"status")},options:[{label:"confirmed",value:"confirmed"},{label:"pending",value:"pending"},{label:"cancelled",value:"cancelled"}]})]}),(0,c.jsx)("button",{onClick:()=>{var e,s,l;(0,i.Vy)({package_id:null===(e=n.package)||void 0===e?void 0:e.value,status:null===(s=n.status)||void 0===s?void 0:s.label,schedule:null===(l=n.schedule)||void 0===l?void 0:l.value}).then((e=>{(0,d.Ay)(e.data.message,{style:{background:"#02B41F",borderRadius:"5px",fontSize:"14px",padding:"2px",color:"white"},duration:5e3}),m(e.data.result.data)})).catch((e=>{(0,d.Ay)(e.response.data.message,{style:{background:"#FFE900",borderRadius:"5px",fontSize:"10px",padding:"2px"},duration:5e3})}))},className:"rounded-md font-Nunito h-fit text-sm px-8 py-1 bg-white border-2 text-[#02B41F] border-[#02B41F]",children:"Apply"})]}),(0,c.jsxs)("div",{className:"w-full rounded-md border border-[#A2DDFF] mt-2 p-2 bg-white h-[82vh] overflow-scroll",children:[u.filter((e=>"pending"===e.booking_status)).map((e=>(0,c.jsxs)("div",{className:"flex bg-[#FEF6EF] justify-between items-center rounded-md font-roboto text-sm border border-[#EF780A] mt-1 px-2 py-1 ",children:[(0,c.jsx)("p",{className:"w-[10%] mr-2 text-center overflow-clip px-2 py-1 rounded-full text-white bg-[#EF780A]",children:e.booking_status}),(0,c.jsx)("p",{className:"w-1/5 overflow-clip",children:e.firstname+" "+e.lastname}),(0,c.jsx)("p",{className:"w-1/5 overflow-clip",children:e.mobile}),(0,c.jsx)("p",{className:"w-1/5 overflow-clip",children:e.start_datetime.split("T")[0]}),(0,c.jsxs)("p",{className:"w-1/5 overflow-clip",children:[e.num_of_slots," units"]}),(0,c.jsxs)("p",{className:"w-1/5 overflow-clip",children:[(0,c.jsx)("span",{className:"text-[10px]",children:e.currency})," ",e.total_price]}),(0,c.jsx)("button",{onClick:()=>{return s=e.booking_order_id,void(0,i.MY)({booking_id:s}).then((e=>{(0,d.Ay)(e.data.message,{style:{background:"#02B41F",borderRadius:"5px",fontSize:"14px",padding:"2px",color:"white"},duration:5e3}),m(u.filter((e=>e.booking_order_id!==s)))})).catch((e=>{(0,d.Ay)(e.response.data.message,{style:{background:"#FFE900",borderRadius:"5px",fontSize:"10px",padding:"2px"},duration:5e3})}));var s},className:"w-[10%] text-center overflow-clip px-2 py-1 rounded-full text-white bg-[#10A3FF]",children:"confirm"}),(0,c.jsx)("div",{className:"flex"})]}))),u.filter((e=>"confirmed"===e.booking_status)).map((e=>(0,c.jsxs)("div",{className:"flex bg-[#F1FFF3] justify-between items-center rounded-md font-roboto text-sm border border-[#A2DDFF] mt-1 px-2 py-1 ",children:[(0,c.jsx)("p",{className:"w-[10%] mr-2 text-center overflow-clip px-2 py-1 rounded-full text-white bg-[#02B41F]",children:e.booking_status}),(0,c.jsx)("p",{className:"w-1/5 overflow-clip",children:e.firstname+" "+e.lastname}),(0,c.jsx)("p",{className:"w-1/5 overflow-clip",children:e.mobile}),(0,c.jsx)("p",{className:"w-1/5 overflow-clip",children:e.start_datetime.split("T")[0]}),(0,c.jsxs)("p",{className:"w-1/5 overflow-clip",children:[e.num_of_slots," units"]}),(0,c.jsxs)("p",{className:"w-1/5 overflow-clip",children:[(0,c.jsx)("span",{className:"text-[10px]",children:e.currency})," ",e.total_price]}),(0,c.jsx)("div",{className:"flex"})]}))),u.filter((e=>"cancelled"===e.booking_status)).map((e=>(0,c.jsxs)("div",{className:"flex bg-[#FFF0F0] justify-between items-center rounded-md font-roboto text-sm border border-[#E90000] mt-1 px-2 py-1 ",children:[(0,c.jsx)("p",{className:"w-[10%] mr-2 text-center overflow-clip px-2 py-1 rounded-full text-white bg-[#E90000]",children:e.booking_status}),(0,c.jsx)("p",{className:"w-1/5 overflow-clip",children:e.firstname+" "+e.lastname}),(0,c.jsx)("p",{className:"w-1/5 overflow-clip",children:e.mobile}),(0,c.jsx)("p",{className:"w-1/5 overflow-clip",children:e.start_datetime.split("T")[0]}),(0,c.jsxs)("p",{className:"w-1/5 overflow-clip",children:[e.num_of_slots," units"]}),(0,c.jsxs)("p",{className:"w-1/5 overflow-clip",children:[(0,c.jsx)("span",{className:"text-[10px]",children:e.currency})," ",e.total_price]}),(0,c.jsx)("div",{className:"flex"})]})))]})]}),(0,c.jsxs)("div",{className:"w-[30%] ml-1",children:[(0,c.jsxs)("div",{className:"w-full rounded-md border font-roboto border-[#A2DDFF] mt-2 bg-white h-[30vh] overflow-scroll",children:[(0,c.jsxs)("div",{className:"flex justify-between bg-[#003640] p-2 rounded-t-md",children:[(0,c.jsx)("p",{className:"w-1/2 text-white",children:"Booking Summary"}),(0,c.jsx)("select",{className:"w-1/2 outline-none",value:x.selected_package,onChange:e=>h({...x,selected_package:e.target.value}),children:s.map((e=>(0,c.jsx)("option",{value:e.product_service_id,children:e.title})))})]}),x.selected_package&&(0,c.jsxs)("div",{className:"w-full mt-4 px-8",children:[(0,c.jsxs)("div",{className:"w-full flex justify-between mt-4",children:[(0,c.jsx)("p",{children:"Total Booking"}),(0,c.jsx)("p",{children:null===x||void 0===x?void 0:x.summary[x.selected_package].total})]}),(0,c.jsxs)("div",{className:"w-full flex justify-between mt-4",children:[(0,c.jsx)("p",{children:"Pending Confirmation"}),(0,c.jsx)("p",{children:null===x||void 0===x?void 0:x.summary[x.selected_package].pending})]}),(0,c.jsxs)("div",{className:"w-full flex justify-between mt-4",children:[(0,c.jsx)("p",{children:"Cancelled Booking"}),(0,c.jsx)("p",{children:null===x||void 0===x?void 0:x.summary[x.selected_package].cancelled})]}),(0,c.jsxs)("div",{className:"w-full flex justify-between mt-4",children:[(0,c.jsx)("p",{children:"Confirmed Booking"}),(0,c.jsx)("p",{children:null===x||void 0===x?void 0:x.summary[x.selected_package].confirmed})]})]})]}),(0,c.jsx)("div",{className:"w-full rounded-md border border-[#A2DDFF] mt-2 bg-white h-[60vh] overflow-scroll",children:(0,c.jsx)("div",{className:"flex justify-between bg-[#003640] p-2 rounded-t-md",children:(0,c.jsx)("p",{className:"w-1/2 text-white",children:"Alerts and Notifications"})})})]})]})}}}]);