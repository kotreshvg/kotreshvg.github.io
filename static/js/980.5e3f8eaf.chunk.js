(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[980],{7737:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var n=r(4165),a=r(5861),s=r(4942),o=r(1413),i=r(9439),l=r(7313),d=r(7224),c=r(1973),u=r.p+"static/media/signup.a310ed147446f40296dd.png",m=r.p+"static/media/Signin.4b725f5d9dc55b2e3cd9.png",p=r(1577);r.p;var f=r(6417),h=r(4319),x=r(1391),g=r(3392),w=r(3262),b=r(4873),v=r(5390),y=r(9864),Z=r(918).Buffer,j=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.Z.getState().globalState.pubKey){e.next=4;break}return e.next=4,T().then((function(e){r=e.data.publicKey})).catch((function(e){throw Error("unable to get public key")}));case 4:if(!r){e.next=9;break}return console.log(r),e.abrupt("return",(0,v.r0)(r,Z.from(JSON.stringify(t))).toString("base64"));case 9:throw Error("no public key available");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hex";return(0,v.O6)(64).toString(t).substring(0,e)},k=function(e,t){var r=String(t).substring(0,32),n=String(t).substring(32),a=(0,v.G_)("aes256",Z.from(r),Z.from(n));return a.update(e,"base64","utf-8")+a.final("utf-8")},S=r(804),T=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.C8.get("/pub-key"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.C8.post("/user/create",{data:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.C8.post("/user/login",{data:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.C8.post("/user/request-resetpassword",{username:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.C8.post("/user/verify-pwdreset-token",{username:t.userName,token:t.token}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.C8.post("/user/resetpassword",{data:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=r(6371),I=r(9284),B=r.n(I),V=r(8467),E=function(e){var t=(0,l.useState)({firstName:"",lastName:"",gender:"Male",DOB:"",email:"",mobile:"",username:"",password:"",confirmPassword:void 0,resetToken:"",resetTokenVerified:void 0,signUpState:void 0,mode:"SignUp",alertMsg:void 0,alertType:void 0,alertDuration:void 0,redirect:void 0,resetModalOpen:!1}),r=(0,i.Z)(t,2),v=r[0],Z=r[1],I=(0,g.v9)((function(e){return e.globalState.device})),E=function(e){switch(e.target.name){case"firstName":case"lastName":if(!w.N.characterOnly(e.target.value))return;break;case"mobile":case"resetToken":if(!w.N.numerOnly(e.target.value))return;break;case"username":if(!w.N.checkUserNameFormat(e.target.value))return}Z((0,o.Z)((0,o.Z)({},v),{},(0,s.Z)({},e.target.name,e.target.value)))};(0,l.useEffect)((function(){T().then((function(e){y.Z.dispatch((0,O.O9)({pubKey:e.data.publicKey}))})).catch((function(e){}))}),[]);var F=function(){new Promise((function(e,t){var r=localStorage.getItem("userName"),n=localStorage.getItem("refreshToken");"undefined"!=r&&"undefined"!=n?j({type:"refreshtoken",username:r,refreshtoken:n}).then((function(n){U(n).then((function(t){localStorage.setItem("authToken",t.data.accesstoken),localStorage.setItem("refreshToken",t.data.refreshtoken),y.Z.dispatch((0,S.gT)((0,o.Z)((0,o.Z)({},t.data),{},{username:r}))),e("authenticated")})).catch((function(e){t("cannot authenticate")}))})).catch((function(e){t("cannot authenticate")})):t("required data not available in session storage")})).then((function(e){Z((0,o.Z)((0,o.Z)({},v),{},{redirect:"/"}))})).catch((function(e){}))},L=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(48),e.t0=b.C8,e.t1=o.Z,e.t2=(0,o.Z)({},t),e.t3={},e.next=7,j(r);case 7:return e.t4=e.sent,e.t5={secret:e.t4},e.t6=(0,e.t1)(e.t2,e.t3,e.t5),e.t7={data:e.t6},e.abrupt("return",e.t0.post.call(e.t0,"/user/gauth",e.t7).then((function(e){var t=JSON.parse(k(e.data,r));Z((function(e){return(0,o.Z)((0,o.Z)({},e),{},{firstName:t.firstname,lastName:t.lastname,email:t.email})}))})));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){window.google.accounts.id.initialize({client_id:"1006369261107-2qm00p8olfg16dm0ffs9cp23qeg4rrsv.apps.googleusercontent.com",callback:L,context:"signup"}),window.google.accounts.id.renderButton(document.getElementById("Gsignup"),{type:"standard",shape:"circle",click_listener:function(){}}),window.google.accounts.id.prompt()}),[]),(0,f.jsxs)("div",{className:"",children:[(0,f.jsxs)("div",{className:"h-[100vh] w-full bg-gradient-to-br from-[#000000] to-[#0414BD] mobile:h-fit",children:[(0,f.jsx)(d.Z,{}),(0,f.jsx)(h.Z,{}),v.alertMsg&&(0,f.jsx)(x.Z,{text:v.alertMsg,timeOut:v.alertDuration,callBack:function(){Z((0,o.Z)((0,o.Z)({},v),{},{alertMsg:void 0,alertType:void 0}))},type:v.alertType}),v.redirect&&(0,f.jsx)(V.Fg,{to:v.redirect,replace:!1}),(0,f.jsxs)("div",{style:{width:"SignUp"==v.mode||"mobile"==I?"80vw":"60vw"},className:"h-[75vh] w-[80vw] flex mx-auto my-6 bg-[#ffffff1f] mobile:bg-transparent rounded-xl  shadow-md shadow-[#0414BD mobile:flex-col mobile:h-fit",children:[(0,f.jsx)("div",{className:"min-w-fit mr-4 mobile:m-0 mobile:h-[20vh] mobile:overflow-hidden",children:(0,f.jsx)("img",{src:"SignUp"==v.mode?u:m,alt:"signup image",className:"h-[100%] rounded-tl-xl mobile:rounded-t-xl rounded-bl-xl mobile:rounded-b-none mobile:w-full mobile:h-max"})}),(0,f.jsxs)("div",{style:{display:"SignUp"==v.mode?"":"none"},className:"w-[100%] h-[80%] grid grid-cols-2 grid-rows-6 gap-4 mr-4 mobile:grid-cols-1 mobile:gap-0",children:[(0,f.jsxs)("h2",{className:"text-3xl text-white mobile:hidden",children:["Register ",(0,f.jsx)("span",{className:"text-xs",children:"* is mandatory field"})]}),(0,f.jsxs)("p",{className:"text-white text-xs",children:["Have account ? Go to",(0,f.jsx)("button",{onClick:function(){Z((0,o.Z)((0,o.Z)({},v),{},{mode:"SignIn"})),F()},className:"text-white mx-2 w-1/4 py-2 rounded-md  bg-gradient-to-r from-[#23a50a] to-[#060c6b]",children:"Sign In"})]}),(0,f.jsxs)("div",{className:" col-start-1",children:[(0,f.jsx)("p",{className:"text-white text-xs mt-2",children:"First Name*"}),(0,f.jsx)("input",{onChange:E,name:"firstName",value:v.firstName,className:"border border-Primary rounded-md p-1 text-sm shadow-md w-full focus:outline-none",type:"text",maxLength:20,placeholder:"vivek"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-white text-xs mt-2",children:"Last Name*"}),(0,f.jsx)("input",{onChange:E,name:"lastName",value:v.lastName,className:"border border-Primary rounded-md p-1 text-sm shadow-md w-full focus:outline-none",type:"text",maxLength:20,placeholder:"chowdary"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-white text-xs mt-2",children:"Gender*"}),(0,f.jsxs)("select",{onChange:E,name:"gender",value:v.gender,className:"border border-Primary rounded-md p-1 text-sm shadow-md w-full focus:outline-none",children:[(0,f.jsx)("option",{value:"Male",children:"Male"}),(0,f.jsx)("option",{value:"Female",children:"Female"}),(0,f.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-white text-xs mt-2",children:"DOB*"}),(0,f.jsx)("input",{onChange:E,name:"DOB",value:v.DOB,className:"border border-Primary rounded-md p-1 text-sm shadow-md w-full focus:outline-none",type:"date"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-white text-xs mt-2",children:"Email*"}),(0,f.jsx)("input",{onChange:E,name:"email",value:v.email,className:"border border-Primary rounded-md p-1 text-sm shadow-md w-full focus:outline-none",type:"email",maxLength:30,placeholder:"vivek@email.com"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-white text-xs mt-2",children:"mobile*"}),(0,f.jsx)("input",{onChange:E,name:"mobile",value:v.mobile,className:"border border-Primary rounded-md p-1 text-sm shadow-md w-full focus:outline-none",type:"tel",maxLength:10})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-white text-xs mt-2",children:"User Name*"}),(0,f.jsx)("input",{onChange:E,name:"username",value:v.username,className:"border border-Primary rounded-md p-1 text-sm shadow-md w-full focus:outline-none",type:"text",maxLength:20,placeholder:"vivek_chowdary"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-white text-xs mt-2",children:"Password*"}),(0,f.jsx)("input",{onChange:E,name:"password",value:v.password,className:"border border-Primary rounded-md p-1 text-sm shadow-md w-full focus:outline-none",type:"password",maxLength:20,placeholder:"min 8 max 20 characters"})]}),(0,f.jsx)("div",{className:"row-start-7 flex justify-end",children:(0,f.jsx)("div",{id:"Gsignup"})}),(0,f.jsx)("div",{className:"col-start-2 mobile:col-start-1 row-start-7 mobile:row-start-auto mobile:mt-2 w-full",children:(0,f.jsx)("button",{onClick:function(){!function(){Z((0,o.Z)((0,o.Z)({},v),{},{signUpState:"initiated"}));var e=v.firstName,t=v.lastName,r=v.email,n=v.mobile,a=v.username,s=v.password,i=v.DOB,l=v.gender;"SignUp"===v.mode&&e.length&&t.length&&w.N.emailFormat(r)&&10===n.length&&a.length?j({firstname:e,lastname:t,gender:l,email:r,dob:i,mobile:n,username:a,password:s}).then((function(e){C(e).then((function(e){Z((0,o.Z)((0,o.Z)({},v),{},{alertMsg:e.data.reason,alertType:e.data.status?"success":"error",alertDuration:5e3,signUpState:void 0}))})).catch((function(e){e.data=e.response.data,Z((0,o.Z)((0,o.Z)({},v),{},{alertMsg:e.data.reason,alertType:e.data.status?"success":"error",alertDuration:5e3,signUpState:void 0}))}))})):Z((0,o.Z)((0,o.Z)({},v),{},{alertMsg:"All fields are mandatory, please fill and verify all fields",alertType:"warning",alertDuration:5e3,signUpState:void 0}))}()},className:"bg-gradient-to-r from-[#000000] to-[#0414BD] w-full rounded-md p-2 h-full text-white font-extrabold animate-bounce mobile:animate-none hover:animate-none",children:void 0==v.signUpState?(0,f.jsx)("p",{children:"Sign Up \u290d"}):(0,f.jsx)(p.Z,{size:6,message:"Wait a moment :)",color:"white"})})})]}),(0,f.jsxs)("div",{style:{display:"SignIn"==v.mode?"":"none"},className:"w-[100%] h-[80%] grid grid-cols-1 grid-rows-6 gap-4 mr-4",children:[(0,f.jsxs)("p",{className:"text-white text-xs",children:["Don't have account ? Go to",(0,f.jsx)("button",{onClick:function(){return Z((0,o.Z)((0,o.Z)({},v),{},{mode:"SignUp"}))},className:"text-white mx-2 w-1/4 py-2 rounded-md  bg-gradient-to-r from-[#23a50a] to-[#060c6b]",children:"Sign Up"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-white text-xs mt-2",children:"User Name"}),(0,f.jsx)("input",{type:"text",onChange:E,name:"username",value:v.username,placeholder:"gauravSingh",className:"border border-Primary rounded-md p-1 text-sm shadow-md w-full focus:outline-none"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-white text-xs mt-2",children:"Password"}),(0,f.jsx)("input",{type:"password",onChange:E,name:"password",value:v.password,placeholder:"********",className:"border border-Primary rounded-md p-1 text-sm shadow-md w-full focus:outline-none"})]}),(0,f.jsx)("div",{className:"row-start-6 mobile:row-start-auto w-full",children:(0,f.jsx)("button",{onClick:function(){!function(){Z((0,o.Z)((0,o.Z)({},v),{},{signUpState:"initiated"}));var e=v.username,t=v.password;"SignIn"===v.mode&&e.length&&t.length?j({type:"password",username:e,password:t}).then((function(e){U(e).then((function(e){localStorage.setItem("authToken",e.data.accesstoken),localStorage.setItem("refreshToken",e.data.refreshtoken),localStorage.setItem("userName",v.username),y.Z.dispatch((0,S.gT)((0,o.Z)((0,o.Z)({},e.data),{},{username:v.username}))),Z((0,o.Z)((0,o.Z)({},v),{},{alertMsg:e.data.reason,alertType:e.data.status?"success":"error",alertDuration:5e3,signUpState:void 0,redirect:e.data.status?"/":""}))})).catch((function(e){e.data=e.response.data,Z((0,o.Z)((0,o.Z)({},v),{},{alertMsg:e.data.reason,alertType:e.data.status?"success":"error",alertDuration:5e3,signUpState:void 0}))}))})):Z((0,o.Z)((0,o.Z)({},v),{},{alertMsg:"All fields are mandatory, please fill and verify all fields",alertType:"warning",alertDuration:5e3,signUpState:void 0}))}()},className:"bg-gradient-to-r from-[#000000] to-[#0414BD] w-full rounded-md p-2 h-full text-white font-extrabold animate-bounce hover:animate-none mobile:animate-none",children:void 0==v.signUpState?(0,f.jsx)("p",{children:"Sign In \u290d"}):(0,f.jsx)(p.Z,{size:6,message:"Wait a moment :)",color:"white"})})}),(0,f.jsxs)("div",{className:"row-start-7 flex justify-between mobile:row-start-auto text-xs text-white underline cursor-pointer w-full",children:[(0,f.jsx)("span",{onClick:function(){v.username&&v.username.length?M(v.username).then((function(e){Z((0,o.Z)((0,o.Z)({},v),{},{alertMsg:e.data.reason,alertType:e.data.status?"success":"error",alertDuration:5e3,signUpState:void 0}))})).catch((function(e){e.data=e.response.data,Z((0,o.Z)((0,o.Z)({},v),{},{alertMsg:e.data.reason,alertType:e.data.status?"success":"error",alertDuration:5e3,signUpState:void 0}))})):Z((0,o.Z)((0,o.Z)({},v),{},{alertMsg:"UserName is required for password reset",alertType:"warning",alertDuration:5e3,signUpState:void 0}))},children:"Reset Password"}),(0,f.jsx)("span",{onClick:function(){Z((0,o.Z)((0,o.Z)({},v),{},{resetModalOpen:!0}))},children:"Verify Token"})]})]})]})]}),(0,f.jsxs)(B(),{isOpen:v.resetModalOpen,shouldCloseOnOverlayClick:!0,style:{content:{top:"50%",left:"50%",right:"auto",width:"mobile"==I?"100%":"40%",height:"40%",bottom:"auto",transform:"translate(-50%, -50%)",backgroundColor:"#E6E6F9"},overlay:{backgroundColor:"#3C3838",opacity:.97}},children:[(0,f.jsxs)("header",{className:" flex justify-between bg-Primary-500",children:[(0,f.jsx)("h2",{children:"Verify Reset Token"}),(0,f.jsx)("button",{onClick:function(){Z((0,o.Z)((0,o.Z)({},v),{},{resetModalOpen:!1}))},children:(0,f.jsx)("img",{src:c.Z})})]}),!v.resetTokenVerified&&(0,f.jsxs)("div",{className:"h-[70%] w-full flex flex-col items-center justify-center",children:[(0,f.jsx)("p",{style:{color:5==v.resetToken.length?"green":"red"},className:"text-xs",children:5==v.resetToken.length?"click on Verify button":"Enter five digit reset token"}),(0,f.jsx)("input",{onChange:function(e){return E(e)},name:"resetToken",value:v.resetToken,className:"border border-Primary rounded-md p-2 text-center shadow-md w-1/3 h-10 font-bold text-lg focus:outline-none",type:"text",maxLength:5}),!1===v.resetTokenVerified?(0,f.jsx)("p",{className:"text-xs text-red",children:"Cannot Verify reset token, please enter correct number"}):"",(0,f.jsx)("button",{onClick:function(){v.resetToken.length&&w.N.numerOnly(v.resetToken)&&P({userName:v.username,token:v.resetToken}).then((function(e){Z((0,o.Z)((0,o.Z)({},v),{},{resetTokenVerified:e.data.status,alertMsg:e.data.reason,alertType:e.data.status?"success":"error",alertDuration:5e3,signUpState:void 0}))})).catch((function(e){e.data=e.response.data,Z((0,o.Z)((0,o.Z)({},v),{},{resetTokenVerified:e.data.status,alertMsg:e.data.reason,alertType:e.data.status?"success":"error",alertDuration:5e3,signUpState:void 0}))}))},className:"text-white w-1/4 py-1 mt-8 rounded-md  bg-gradient-to-r from-[#23a50a] to-[#060c6b]",children:"Verify"})]}),v.resetTokenVerified&&(0,f.jsxs)("div",{className:"h-[70%] w-full flex flex-col items-center justify-center",children:[(0,f.jsx)("p",{style:{color:5==v.resetToken.length?"green":"red"},className:"text-xs",children:"Enter New password"}),(0,f.jsx)("input",{onChange:function(e){return E(e)},name:"password",value:v.password,className:"border border-Primary rounded-md p-2 text-center shadow-md w-2/3 h-10 font-bold text-lg focus:outline-none",type:"text"}),v.confirmPassword&&v.confirmPassword!==v.password?(0,f.jsx)("p",{className:"text-xs text-crimson",children:"Password Not Matching"}):"",(0,f.jsx)("input",{onChange:function(e){return E(e)},name:"confirmPassword",value:v.confirmPassword,className:"border border-Primary rounded-md p-2 text-center shadow-md w-2/3 h-10 font-bold text-lg focus:outline-none",type:"text"}),(0,f.jsx)("button",{onClick:function(){var e=v.username,t=v.password,r=v.confirmPassword,n=v.resetTokenVerified,a=v.resetToken;e&&w.N.checkUserNameFormat(e)&&t.length&&t===r&&n&&j({username:e,token:a,password:t}).then((function(e){D(e).then((function(e){Z((0,o.Z)((0,o.Z)({},v),{},{resetTokenVerified:void 0,alertMsg:e.data.reason,alertType:e.data.status?"success":"error",alertDuration:5e3,signUpState:void 0,resetModalOpen:!e.data.status}))})).catch((function(e){e.data=e.response.data,Z((0,o.Z)((0,o.Z)({},v),{},{alertMsg:e.data.reason,alertType:e.data.status?"success":"error",alertDuration:5e3,signUpState:void 0}))}))}))},className:"text-white w-1/2 py-1 mt-8 rounded-md  bg-gradient-to-r from-[#23a50a] to-[#060c6b]",children:"Reset Password"})]})]})]})}},1577:function(e,t,r){"use strict";r(7313);var n=r(6417);t.Z=function(e){return(0,n.jsxs)("div",{className:"h-full flex \r justify-around items-center",children:[(0,n.jsx)("div",{style:{height:"".concat(e.size?String(parseInt(e.size)/4)+"rem":"1.5rem"),width:"".concat(e.size?String(parseInt(e.size)/4)+"rem":"1.5rem"),borderColor:"".concat(e.color?e.color:"#2B7E38")},className:"border-x-0\r border-t-0 border-b-2 border-green\r duration-500 rounded-full animate-spin"}),e.message&&(0,n.jsx)("p",{className:" text-xs",children:e.message})]})}},950:function(){},6601:function(){},9214:function(){},8623:function(){},7748:function(){},5568:function(){},6619:function(){},7108:function(){},2361:function(){},4616:function(){}}]);