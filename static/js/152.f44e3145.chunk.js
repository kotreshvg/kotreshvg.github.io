"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[152],{7231:(e,s,t)=>{t.d(s,{A:()=>a});t(9950);const a=t.p+"static/media/AddiconWhite.5100a9f308c15b352ca926a827147e82.svg"},1003:(e,s,t)=>{t.d(s,{A:()=>a});t(9950);const a=t.p+"static/media/arrow-left-solid.07f8c39113e8fb15b640ecafe6256813.svg"},9152:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(9950),l=t(8429),i=(t(1840),t(2832)),c=t(3999),d=(t(8341),t(5887)),n=t(9663),r=t(5916),o=t(8606),m=t(1003),u=t(7227),x=t(1908),h=t(8583),p=t(7231);const g=t.p+"static/media/minus.f186aa3ef5ab5ee608137ba8d3ac5e42.svg";const f=t.p+"static/media/PickupIcon.3e64c2d928b08dc013a3414de9a28523.svg";var j=t(9426),b=t(9749),_=t(6435),N=t(863),w=t(4414);const y=e=>{const s=(0,l.Zp)(),{packagename:t,packageid:y}=(0,l.g)(),[v,k]=(0,a.useState)(void 0),[F,A]=(0,a.useState)({inc_collapsed:!0,canc_collapsed:!0,selected_spots:1,selected_info:"package",selected_schedule:void 0,taxes_collapsed:!0,display_mode:"package",login_warning_modal:!1,guest_user_signin:!1,guest_full_name:"",guest_email:"",guest_phone:"",guest_otp:""}),[C,L]=(0,a.useState)([]),[R,S]=(0,a.useState)(0);(0,a.useEffect)((()=>{(0,x.xG)(y).then((e=>{k(e.data.result?e.data.result[0]:{}),D(e.data.result[0].images)})).catch((e=>{console.log(e)}))}),[]);const H=e=>{A({...F,selected_info:e})},B=e=>{F.selected_schedule?(0,h.Fg)({product_service_id:v.product_service_id,schedule_id:F.selected_schedule,user_token:b.A.getState().authentication.authToken||localStorage.getItem("authToken"),number_of_slots:F.selected_spots}).then((s=>{A({...F,display_mode:e,checkout_info:s.data.result.checkout_info})})).catch((e=>{(0,d.Ay)(e.response.data.message,{style:{background:"#E90000",borderRadius:"5px",fontSize:"12px",padding:"2px",color:"white"},duration:5e3}),401==e.response.status&&A({...F,login_warning_modal:!0})})):(0,d.Ay)("Schedule not selected",{style:{background:"#E90000",borderRadius:"5px",fontSize:"12px",padding:"2px",color:"white"},duration:5e3})},D=e=>{if(e.length){const s=e.map((e=>{const s=new Image;return s.src=e,s}));console.log("fetched images"),L(s),setInterval((()=>{S((s=>(s+1)%e.length))}),3e3)}},E=(e,s)=>{A((t=>({...t,[e]:s})))};return(0,w.jsxs)("div",{className:"w-[100vw] h-[100vh",children:[(0,w.jsx)(i.A,{}),(0,w.jsx)(d.l$,{}),(0,w.jsx)("div",{className:"flex justify-center items-center",children:(0,w.jsx)(_.A,{open:F.login_warning_modal,close:()=>{A({...F,login_warning_modal:!1})},closeOnDocumentClick:!0,children:(0,w.jsxs)("div",{children:[!F.guest_user_signin&&(0,w.jsxs)("div",{className:"text-center",children:["Sign Up to Save Your Booking!",(0,w.jsx)("p",{className:"text-sm",children:"We're almost there! Creating an account allows you to view and manage all your bookings in one place and enjoy a seamless experience on your trips. It only takes a moment!"}),(0,w.jsx)("button",{onClick:e=>s("/auth",{state:{redirect:window.location.pathname,mode:"SignIn"}}),className:" py-2 px-4 mt-10 mx-2 rounded-md bg-black text-white",children:"Login / Sign Up"}),(0,w.jsx)("button",{onClick:e=>A((e=>({...e,guest_user_signin:!0}))),className:" p-2 rounded-md text-black border-black border",children:"Continue as Guest"})]}),F.guest_user_signin&&(0,w.jsxs)("div",{className:"text-center",children:["Complete Your Booking as a Guest",(0,w.jsx)("p",{className:"my-4",children:"Just a few details, and you're all set! You'll receive a confirmation and can manage your booking anytime."}),(0,w.jsx)("p",{className:"text-left text-sm font-RedHatLight",children:"Full Name"}),(0,w.jsx)("input",{value:F.guest_full_name,onChange:e=>E("guest_full_name",e.target.value),className:"w-full p-1 outline-none border-slate-300 border rounded-md"}),(0,w.jsx)("p",{className:"text-left text-sm font-RedHatLight",children:"Mobile"}),(0,w.jsx)("input",{value:F.guest_phone,onChange:e=>E("guest_phone",e.target.value),maxLength:10,className:"w-full p-1 outline-none border-slate-300 border rounded-md"}),(0,w.jsx)("p",{className:"text-left text-sm font-RedHatLight",children:"Email"}),(0,w.jsx)("input",{value:F.guest_email,onChange:e=>E("guest_email",e.target.value),className:"w-full p-1 outline-none border-slate-300 border rounded-md"}),(0,w.jsx)("p",{className:"text-left text-sm font-RedHatLight",children:"Enter OTP"}),(0,w.jsx)("input",{value:F.guest_otp,onChange:e=>E("guest_otp",e.target.value),maxLength:10,className:"w-full p-1 outline-none border-slate-300 border rounded-md"}),(0,w.jsx)("button",{onClick:()=>{(0,h.mW)({full_name:F.guest_full_name,email:F.guest_email,mobile:F.guest_phone}).then((e=>{(0,u.Zx)(e.data.message)})).catch((e=>{(0,u.Ax)(e.response.data.message)}))},className:" py-2 px-4 mt-10 mx-2 rounded-md bg-black text-white",children:"Send OTP"}),(0,w.jsx)("button",{onClick:()=>{(0,h.OB)({full_name:F.guest_full_name,email:F.guest_email,mobile:F.guest_phone,otp:F.guest_otp}).then((e=>{console.log(e.data),localStorage.setItem("authToken",e.data.accesstoken),localStorage.setItem("refreshToken",e.data.refreshtoken),b.A.dispatch((0,N.mP)({...e.data,username:null})),A((e=>({...e,guest_email:"",guest_full_name:"",guest_otp:"",guest_phone:"",guest_user_signin:!1,login_warning_modal:!1})))})).catch((e=>{(0,u.Ax)(e.response.data.message)}))},className:" py-2 px-4 mt-10 mx-2 rounded-md bg-black text-white",children:"Confirm and Continue"}),(0,w.jsx)("button",{onClick:e=>s("/auth",{state:{redirect:window.location.pathname,mode:"SignIn"}}),className:" p-2 rounded-md text-black ",children:"Create an Account Instead"})]})]})})}),v&&"package"===F.display_mode&&(0,w.jsxs)("div",{className:"w-full relative",children:[(0,w.jsxs)("div",{className:"flex p-2 border border-[#10A3FF] my-2 mx-1 rounded-md",children:[(0,w.jsx)("img",{onClick:()=>{s(-1)},className:"mr-4",src:m.A,width:"15px",alt:"back button"}),v.title]}),C.length>0&&(0,w.jsx)("img",{className:"w-full aspect-video object-contain",src:null!==C&&void 0!==C&&C.length?C[R].src:"",alt:"package cover image"}),(0,w.jsxs)("div",{className:"flex justify-center bg-[#F4FBFF] p-2 border border-[#10A3FF] my-2 mx-1 rounded-md",children:[(0,w.jsx)("img",{src:n.A,alt:"package destination"}),(0,w.jsx)("p",{children:v.details.destination})]}),(0,w.jsxs)("div",{className:"flex my-4 mx-1",children:[(0,w.jsxs)("div",{className:"flex w-1/2 bg-[#F4FBFF] mr-1 p-2 justify-center rounded-md border border-[#10A3FF]",children:[(0,w.jsx)("img",{src:r.A,className:"mr-2",alt:"duration of package"}),(0,w.jsxs)("p",{children:[v.details.duration," Days"]})]}),(0,w.jsxs)("div",{className:"flex w-1/2 bg-[#FBB428] ml-1 rounded-md justify-center items-center",children:[(0,w.jsx)("p",{className:"text-xs font-RedHatLight mr-4",children:v.details.currency}),v.details.base_price]})]}),(0,w.jsxs)("div",{className:"mx-1 p-2 border border-[#A2DDFF] bg-[#F4FBFF] rounded-md mt-2",children:[(0,w.jsxs)("div",{className:"flex justify-between",children:[(0,w.jsx)("p",{children:"Discount - Taxes & Fees Applicable"}),(0,w.jsx)("img",{className:"cursor-pointer",style:{rotate:F.taxes_collapsed?"0deg":"180deg"},onClick:()=>A({...F,taxes_collapsed:!F.taxes_collapsed}),src:j.A,width:"20px",alt:"business info collapse"})]}),!F.taxes_collapsed&&(0,w.jsxs)("div",{className:"w-full flex-wrap my-2 flex",children:[(0,w.jsxs)("p",{className:"font-RedHatLight",children:["Tax of ",v.details.currency," ",v.details.tax_fees?v.details.tax_fees:0," applicable per unit"]}),(0,w.jsxs)("p",{className:"font-RedHatLight",children:["Discount of ",v.details.currency," ",v.details.discount?v.details.discount:0," applicable per unit"]})]})]}),(0,w.jsxs)("div",{className:"flex mt-4 mx-1",children:[(0,w.jsx)("div",{onClick:()=>H("package"),style:"package"===F.selected_info?{backgroundColor:"#10A3FF",color:"white"}:{},className:"flex w-1/2 cursor-pointer bg-[#F4FBFF] p-2 justify-center rounded-t-md border border-[#10A3FF]",children:(0,w.jsx)("p",{children:"Package Details"})}),(0,w.jsx)("div",{onClick:()=>H("itinerary"),style:"itinerary"===F.selected_info?{backgroundColor:"#10A3FF",color:"white"}:{},className:"flex cursor-pointer w-1/2 border border-[#10A3FF] bg-[#F4FBFF] rounded-t-md justify-center items-center",children:(0,w.jsx)("p",{children:"Itinerary"})})]}),"package"===F.selected_info&&(0,w.jsxs)("div",{className:"my-2 mx-1",children:[(0,w.jsx)("div",{className:"w-full h-fit p-4 font-RedHatLight rounded-md border border-[#10A3FF] bg-[#F4FBFF]",children:v.short_description}),(0,w.jsx)("div",{className:"w-full mt-4 flex justify-center",children:(0,w.jsx)("p",{className:"font-RedHatLight",children:"Select Slot"})}),(0,w.jsxs)("div",{className:"flex justify-between mb-4 p-2 rounded-md border border-[#10A3FF]",children:[(0,w.jsx)("img",{onClick:()=>{1!==F.selected_spots&&A({...F,selected_spots:F.selected_spots-1})},className:" rounded-md border border-[#1E90FF]",width:"25px",src:g,alt:"slot add icon"}),(0,w.jsxs)("div",{className:"flex justify-center",children:[(0,w.jsx)("img",{src:o.A,className:" aspect-square",width:"25px"}),(0,w.jsx)("p",{className:"",children:F.selected_spots})]}),(0,w.jsx)("img",{onClick:()=>{A({...F,selected_spots:F.selected_spots+1})},className:" rounded-md bg-[#1E90FF]",width:"25px",src:p.A,alt:"slot add icon"})]}),(0,w.jsx)("div",{className:"w-full flex justify-center",children:(0,w.jsx)("p",{className:"font-RedHatLight",children:"Choose Schedule"})}),(0,w.jsx)("div",{className:"w-full h-fit mb-8 flex-nowrap flex flex-row overflow-x-scroll",children:v.schedules.map((e=>{let s=(0,u.r6)(e.start_datetime),t=(0,u.r6)(e.end_datetime);return(0,w.jsxs)("div",{onClick:()=>{return s=e.schedule_id,void A({...F,selected_schedule:s});var s},style:e.schedule_id===F.selected_schedule?{backgroundColor:"#7E6CEF",color:"white"}:{},className:"w-3/4 ml-4 text-sm p-2 border border-[#1E90FF] rounded-md font-RedHatLight flex-shrink-0",children:[(0,w.jsxs)("div",{className:" flex py-2 justify-between",children:[(0,w.jsx)("p",{children:s}),(0,w.jsxs)("div",{className:"flex ",children:[(0,w.jsx)("img",{src:o.A,width:"20px",alt:"schedule availability"}),(0,w.jsxs)("p",{children:[e.availability," Available"]})]})]}),(0,w.jsxs)("div",{className:" flex py-2 justify-between",children:[(0,w.jsx)("p",{children:t}),(0,w.jsxs)("div",{className:"flex ",children:[(0,w.jsx)("img",{src:f,className:"mr-2",width:"20px",alt:"schedule availability"}),(0,w.jsx)("p",{children:e.location})]})]})]},e.schedule_id)}))}),(0,w.jsxs)("div",{className:"w-full p-2 border border-[#A2DDFF] bg-[#F4FBFF] rounded-md mt-2",children:[(0,w.jsxs)("div",{className:"flex justify-between",children:[(0,w.jsx)("p",{children:"Included In Package"}),(0,w.jsx)("img",{className:"cursor-pointer",style:{rotate:F.inc_collapsed?"0deg":"180deg"},onClick:()=>A({...F,inc_collapsed:!F.inc_collapsed}),src:j.A,width:"20px",alt:"business info collapse"})]}),!F.inc_collapsed&&(0,w.jsx)("div",{className:"w-full flex-wrap my-2 flex",children:v.details.included_in_package.map((e=>(0,w.jsx)("div",{className:"w-fit px-2 py-1 text-sm m-1 rounded-full bg-white border border-[#02B41F]",children:e},e)))})]}),(0,w.jsxs)("div",{className:"w-full p-2 bg-[#FFD1D1] rounded-md mt-2",children:[(0,w.jsxs)("div",{className:"flex justify-between",children:[(0,w.jsx)("p",{children:"Cancellation Policy"}),(0,w.jsx)("img",{className:"cursor-pointer",style:{rotate:F.canc_collapsed?"0deg":"180deg"},onClick:()=>A({...F,canc_collapsed:!F.canc_collapsed}),src:j.A,width:"20px",alt:"business info collapse"})]}),!F.canc_collapsed&&(0,w.jsx)("p",{className:"my-4 font-RedHatLight",children:v.details.cancellation_terms})]})]}),"itinerary"===F.selected_info&&(0,w.jsxs)("div",{className:"p-2 grid grid-cols-[auto_1fr] gap-4",children:[(0,w.jsx)("div",{className:"flex flex-col items-center overflow-scroll ",children:v.details.itinerary&&v.details.itinerary.map(((e,s)=>(0,w.jsxs)("div",{className:"relative flex flex-col mt-2 items-center",style:{height:"120px"},children:[(0,w.jsx)("div",{className:"w-6 h-6 bg-[#0D47A1] rounded-full flex items-center justify-center text-white",children:s+1}),(0,w.jsx)("div",{className:"line-segment"})]})))}),(0,w.jsx)("div",{className:"",children:v.details.itinerary&&v.details.itinerary.map(((e,s)=>(0,w.jsxs)("div",{className:" bg-[#EAF2FF] shadow my-2 rounded-lg flex ",style:{height:"120px"},children:[(0,w.jsx)("div",{className:"w-[10%] rounded-l-lg bg-[#0D47A1] h-full text-white flex flex-col justify-center font-bold",children:(0,w.jsx)("span",{className:"rotated-text",children:e.day})}),(0,w.jsx)("div",{className:"text-gray-600 p-2",children:e.description})]},s)))})]}),(0,w.jsxs)("div",{className:"flex my-2 sticky bottom-0 left-0 w-full",children:[(0,w.jsxs)("div",{className:"flex w-1/2 mx-1 bg-[#F4FBFF] p-2 items-center justify-evenly rounded-md border border-[#10A3FF]",children:[(0,w.jsx)("p",{className:"text-xs font-RedHatLight",children:"Total cost"}),(0,w.jsxs)("p",{children:[v.details.currency," ",(v.details.base_price-v.details.discount+v.details.tax_fees)*F.selected_spots]})]}),(0,w.jsx)("div",{onClick:()=>B("summary"),className:"cursor-pointer mx-1 flex w-1/2 bg-[#FBB428] rounded-md justify-center items-center",children:(0,w.jsx)("p",{className:"font-Nunito mr-4",children:"Book Now"})})]})]}),v&&F.checkout_info&&"summary"===F.display_mode&&(0,w.jsxs)("div",{className:"",children:[(0,w.jsxs)("div",{className:"flex p-2 border border-[#10A3FF] my-2 mx-2 rounded-md",children:[(0,w.jsx)("img",{onClick:()=>B("package"),className:"mr-4",src:m.A,width:"15px",alt:"back button"}),"Booking Overview"]}),(0,w.jsxs)("div",{className:"bg-[#F4FBFF] my-4 p-2",children:[(0,w.jsx)("p",{className:"font-RedHatLight text-xs my-2",children:"PACKAGE NAME"}),(0,w.jsx)("p",{className:"my-1",children:v.title}),(0,w.jsx)("hr",{}),(0,w.jsx)("p",{className:"font-RedHatLight text-center text-xs my-2",children:"SCHEDULE INFO"}),v.schedules.filter((e=>e.schedule_id==F.selected_schedule)).map((e=>(0,w.jsxs)("div",{className:"my-2",children:[(0,w.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,w.jsx)("p",{className:"font-RedHatLight w-1/2",children:"Start Date"}),(0,w.jsx)("p",{className:"w-1/2",children:(0,u.r6)(e.start_datetime)})]}),(0,w.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,w.jsx)("p",{className:"font-RedHatLight w-1/2",children:"End Date"}),(0,w.jsx)("p",{className:"w-1/2",children:(0,u.r6)(e.end_datetime)})]}),(0,w.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,w.jsx)("p",{className:"font-RedHatLight w-1/2",children:"Pickup Location"}),(0,w.jsx)("p",{className:"w-1/2",children:e.location})]})]},e.schedule_id))),(0,w.jsx)("hr",{}),(0,w.jsxs)("div",{className:"my-2",children:[(0,w.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,w.jsx)("p",{className:"font-RedHatLight w-1/2",children:"Slots Booked"}),(0,w.jsx)("p",{className:"w-1/2",children:F.checkout_info.slots})]}),(0,w.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,w.jsx)("p",{className:"font-RedHatLight w-1/2",children:"Included Items"}),(0,w.jsx)("p",{className:"w-1/2",children:v.details.included_in_package.join(", ")})]})]}),(0,w.jsx)("hr",{}),(0,w.jsx)("p",{className:"font-RedHatLight text-center text-xs my-2",children:"COST BREAKDOWN"}),(0,w.jsxs)("div",{className:"my-2",children:[(0,w.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,w.jsx)("p",{className:"font-RedHatLight w-1/2",children:"Base Price"}),(0,w.jsxs)("p",{className:"w-1/2",children:[F.checkout_info.currency," ",F.checkout_info.base_price]})]}),(0,w.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,w.jsx)("p",{className:"font-RedHatLight w-1/2",children:"Discount"}),(0,w.jsxs)("p",{className:"w-1/2",children:[F.checkout_info.currency," ",F.checkout_info.discount]})]}),(0,w.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,w.jsx)("p",{className:"font-RedHatLight w-1/2",children:"Taxes"}),(0,w.jsxs)("p",{className:"w-1/2",children:[F.checkout_info.currency," ",F.checkout_info.tax_fees]})]}),(0,w.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,w.jsx)("p",{className:"font-RedHatLight w-1/2",children:"Units"}),(0,w.jsx)("p",{className:"w-1/2",children:F.checkout_info.slots})]}),(0,w.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,w.jsx)("p",{className:"font-RedHatLight w-1/2",children:"Total Amount"}),(0,w.jsxs)("p",{className:"w-1/2",children:[F.checkout_info.currency," ",F.checkout_info.total_cost]})]})]}),(0,w.jsx)("hr",{}),(0,w.jsx)("button",{onClick:()=>{let e=b.A.getState().authentication.authToken||localStorage.getItem("authToken");(0,h.sH)({product_service_id:v.product_service_id,schedule_id:F.selected_schedule,user_token:e,number_of_slots:F.selected_spots,total_price:F.selected_spots*(v.details.base_price-v.details.discount+v.details.tax_fees),booking_status:"pending",payment_status:"unpaid"}).then((e=>{console.log(e),(0,d.Ay)(e.data.message,{style:{background:"#02B41F",borderRadius:"5px",fontSize:"14px",padding:"2px",color:"white"},duration:5e3}),s("/booking/success")})).catch((e=>{(0,d.Ay)(e.response.data.message,{style:{background:"#E90000",borderRadius:"5px",fontSize:"12px",padding:"2px",color:"white"},duration:5e3}),e.response.staus}))},className:"w-full p-2 bg-[#FBB428] font-Nunito rounded-md mt-2",children:"Complete Booking"})]})]}),(0,w.jsx)(c.A,{})]})}},6435:(e,s,t)=>{t.d(s,{A:()=>c});var a=t(9950),l=t(3300),i=t(4414);const c=e=>{const[s,t]=(0,a.useState)({...e});return(0,i.jsx)("div",{id:"backdrop",onClick:s=>{s.preventDefault(),!1!==e.closeOnDocumentClick&&"backdrop"===s.target.id&&e.close()},style:{display:e.open?"inherit":"none"},className:"fixed z-10 left-0 top-0 w-[100vw] h-[100vh] bg-[#1b1818c7] flex justify-center items-center",children:(0,i.jsxs)("section",{className:"fixed h-auto min-w-[20vw] bg-white rounded-lg p-4 ",children:[(0,i.jsx)("div",{onClick:e.close,className:"mobile:hidden mobile:-top-10 absolute p-2 bg-slate-300 rounded-full -top-6 -right-6 hover:scale-105 border border-dotted border-black",children:(0,i.jsx)("img",{className:"",width:"",src:l.A,alt:"modal Close Btn"})}),a.Children.map(e.children,(s=>a.cloneElement(s,e)))]})})}}}]);